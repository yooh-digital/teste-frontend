!function(t){t.MenuAnchor=function(n,e){var i=this;t("body");i.settings=t.extend({window:window.top,pluralId:"menu-anchor-",contentPostfix:"-content",scroll:!0},e),i.scroll=!0,i.init=function(){t(n).find("[id^="+i.settings.pluralId+"]").each(function(n,e){t(e).click(function(n){n.preventDefault(),i.settings.scroll&&(i.scroll=!1);var s=t("#"+e.id+i.settings.contentPostfix).position();t(i.settings.window.document).find("html, body").animate({scrollTop:s.top-5},{duration:"slow",complete:function(){i.settings.scroll&&(i.scroll=!0),i.setSelectedLink(e.id)},error:function(){i.settings.scroll&&(i.scroll=!0),i.setSelectedLink(e.id)}})})}),i.settings.scroll&&t(i.settings.window).scroll(function(){i.scroll&&i.setSelectedLink()})},i.setSelectedLink=function(e){var s=-1,o="";t(n).find("[id^="+i.settings.pluralId+"]").each(function(n,e){if("undefined"!=typeof i.settings.window){t("#"+e.id).hasClass("selected")&&t("#"+e.id).removeClass("selected");var c=t("#"+e.id+i.settings.contentPostfix).offset(),l=i.settings.window.pageYOffset,d=c.top-l;(d>=0&&s>=d||0>=s||""===o)&&(s=d,o=e.id)}}),e&&(o=e),""!==o&&t("#"+o).addClass("selected")},i.init(),i.setSelectedLink()},t.fn.MenuAnchor=function(n){return this.each(function(){new t.MenuAnchor(this,n)})}}(jQuery);